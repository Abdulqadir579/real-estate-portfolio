var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},__assign.apply(this,arguments)},DOM={timeline:"timeline",timelineStepper:"timeline__stepper",timelineStep:"timeline__step",timelineStepTitle:"timeline__step-title",timelineStepActive:"is-active",timelineStepActiveMarker:"timeline__step-active-marker",timelineSlidesContainer:"timeline__slides",timelineSlide:"timeline__slide",timelineSlideActive:"is-active"},STEP_ACTIVE_MARKEP_CUSTOM_PROPS={width:"--slide-width",posX:"--slide-pos-x",posY:"--slide-pos-y"},SLIDES_CONTAINER_CUSTOM_PROPS={height:"--slides-container-height"},timeline=document.querySelector(".".concat(DOM.timeline)),timelineStepper=null==timeline?void 0:timeline.querySelector(".".concat(DOM.timelineStepper)),timelineStepTitle=null==timeline?void 0:timeline.querySelector(".".concat(DOM.timelineStepTitle)),timelineSlidesContainer=null==timeline?void 0:timeline.querySelector(".".concat(DOM.timelineSlidesContainer)),timelineSlides=timeline&&Array.from(timeline.querySelectorAll(".".concat(DOM.timelineSlide)));function deactivateSteps(){var e=document.querySelectorAll(".".concat(DOM.timelineStep));null==e||e.forEach((function(e){return e.classList.remove("".concat(DOM.timelineStepActive))}))}function activateCurrentStep(e){null==e||e.classList.add("".concat(DOM.timelineStepActive))}function deactivateSlides(){null==timelineSlides||timelineSlides.forEach((function(e){return e.classList.remove("".concat(DOM.timelineSlideActive))}))}function activateCurrentSlide(){var e=getCurrentSlide();e&&(setSlideContainerHeight(getCurrentSlideHeight(e)),e.classList.add("".concat(DOM.timelineSlideActive)))}function createStepActiveMarker(){var e=document.createElement("div");e.classList.add("".concat(DOM.timelineStepActiveMarker)),null==timelineStepper||timelineStepper.appendChild(e);var t=getStepActiveMarkerProps();t&&setStepActiveMarkerProps(__assign({stepActiveMarker:e},t))}function recalcStepActiveMarkerProps(){var e=null==timeline?void 0:timeline.querySelector(".".concat(DOM.timelineStepActiveMarker)),t=getStepActiveMarkerProps();t&&setStepActiveMarkerProps(__assign({stepActiveMarker:e},t))}function setStepActiveMarkerProps(e){var t=e.stepActiveMarker,i=e.posX,n=e.posY,r=e.width;t.style.setProperty("".concat(STEP_ACTIVE_MARKEP_CUSTOM_PROPS.width),"".concat(r,"px")),t.style.setProperty("".concat(STEP_ACTIVE_MARKEP_CUSTOM_PROPS.posX),"".concat(i,"px")),"number"==typeof n&&t.style.setProperty("".concat(STEP_ACTIVE_MARKEP_CUSTOM_PROPS.posY),"".concat(n,"px"))}function getStepActiveMarkerProps(){var e=getCurrentStep().currentStep;if(!e)return null;var t=getElementWidth(e),i=getStepActiveMarkerPosX(e),n=getStepActiveMarkerPosY();return"number"!=typeof i||"number"!=typeof n?null:{posX:i,posY:n,width:t}}function getCurrentStep(){var e=Array.from(document.querySelectorAll(".".concat(DOM.timelineStep))),t=e.find((function(e){return e.classList.contains("".concat(DOM.timelineStepActive))}));return{currentStep:t,currentStepIndex:t&&e.findIndex((function(e){return e.classList.contains("".concat(DOM.timelineStepActive))}))}}function getCurrentSlide(){var e=getCurrentStep().currentStepIndex;return"number"==typeof e&&timelineSlides?timelineSlides[e]:null}function setSlideContainerHeight(e){null==timelineSlidesContainer||timelineSlidesContainer.style.setProperty("".concat(SLIDES_CONTAINER_CUSTOM_PROPS.height),"".concat(e,"px"))}function getCurrentSlideHeight(e){return e.clientHeight}function getStepActiveMarkerPosY(){var e=null==timelineStepTitle?void 0:timelineStepTitle.getBoundingClientRect().top,t=null==timelineStepper?void 0:timelineStepper.getBoundingClientRect().top;return e&&t?e-t:null}function getStepActiveMarkerPosX(e){var t=null==timelineStepper?void 0:timelineStepper.getBoundingClientRect().left,i=e.getBoundingClientRect().left;return t?i-t:null}function getElementWidth(e){return e.clientWidth}window.addEventListener("load",(function(){createStepActiveMarker(),activateCurrentSlide()})),window.addEventListener("resize",(function(){recalcStepActiveMarkerProps()})),null==timeline||timeline.addEventListener("click",(function(e){var t=e.target;if(t&&t instanceof Element&&t.closest(".".concat(DOM.timelineStep))){var i=t.closest(".".concat(DOM.timelineStep));i&&(deactivateSteps(),activateCurrentStep(i),recalcStepActiveMarkerProps(),deactivateSlides(),activateCurrentSlide())}}));